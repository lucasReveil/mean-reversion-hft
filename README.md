> [Version française ici ](README_fr.md)
>
> [Versión castellano acá ](README_es.md)
# Mean Reversion Trading Simulator

A small personal project to simulate simple trading strategies like *mean reversion*, with a high-frequency trading (HFT) twist.

## Goal

Improve C++ and math skills, understand the foundations of a basic backtest engine, and structure a small trading simulation project.

## Project Structure

- `src/` → C++ source files
- `include/` → C++ headers
- `scripts/` → Python scripts for result visualization
- `data/` → CSV files generated by the simulation
- `plots/` → Optional folder for saved plots
- `Makefile` → Build file (`make && ./sim`)
- `main.cpp` → Entry point of the simulation

## Strategies Implemented

- **Basic Scalping Bot**: enters when spread is low, sells at next tick
- **Mean Reversion Bot (MRB)**: entry on price returning toward moving average ± 2σ, exit via take profit or trailing stop

## Modes

Run the simulator with different options:

    ./sim [-s SEED] [-t TICKS]

Options:
- -s : (optional) Seed for the random generator
       → ensures the same market is generated each run (if fixed)
       Example: -s 42

- -t : (optional) Number of ticks to simulate
       - If -t is positive or absent → offline mode (default 10,000 ticks)
       - If -t is negative → live mode (ticks every 10ms)

Examples:
    ./sim -s 42 -t 10000
    → Simulates 10,000 ticks with seed 42 (offline mode)

    ./sim -t -1
    → Live mode

## Visualization

After simulation ends, `plot_results.py` auto-launches, plotting:

- Market price over time
- Cumulative PnL for both bots
- Entry/exit points of MRB
- Rolling mean & Bollinger Bands
- Trade signals (buy/sell)

---

## Mathematical Foundations

The core price simulation relies on a **Geometric Brownian Motion (GBM)**, a stochastic model widely used in financial modeling.  
Its continuous form is:

    dS_t = μ S_t dt + σ S_t dW_t

Where:
- S_t: price at time t
- μ: drift (expected return)
- σ: volatility
- W_t: standard Brownian motion (Wiener process)

### Numerical Simulation (Discrete GBM)

To simulate step-by-step, we use the discretized version:

    S_{t+1} = S_t × exp[(μ - 0.5 σ²) × Δt + σ × √Δt × ε]

Where:
- ε ~ N(0, 1)
- Δt is the timestep in years (e.g. 1/252 ≈ one trading day)

This ensures S_t > 0 and models both the drift and randomness of market behavior.

More info: [Wikipedia: Geometric Brownian Motion](https://en.wikipedia.org/wiki/Geometric_Brownian_motion)

### Statistics Used

Used for calculating the rolling average and volatility (σ):

**Rolling mean:**

    μ = (1 / n) × Σ x_i

**Standard deviation (sample-based):**

    σ = sqrt[(1 / (n - 1)) × Σ (x_i - μ)²]

These are used to create Bollinger Bands (μ ± 2σ), guiding buy/sell decisions.

More info: [Wikipedia: Bollinger Bands](https://en.wikipedia.org/wiki/Bollinger_Bands)
